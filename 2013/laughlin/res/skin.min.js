/* 
	Turtle skin by Laszlo Molnar (C) 2011
	version 3.4.8
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",vend=$.browser.msie&&"ms"||$.browser.webkit&&"webkit"||$.browser.mozilla&&"moz"||$.browser.opera&&"o"||"",vendor=vend?"-"+vend+"-":"";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};
String.prototype.trunc=function(b){if(this.length<=b)return this;var b=this.substring(0,b-1),j=b.lastIndexOf(" ");return(6<j&&20>b.length-j?b.substring(0,j):b)+"..."};String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};
String.prototype.fixExtension=function(){return this.replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};var htmlregex=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']];String.prototype.cleanupHTML=function(){for(var b=this,j=htmlregex.length-1;0<=j;j--)b=b.replace(htmlregex[j][0],htmlregex[j][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,j){return(this.length?this+(j||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,j=this.match(/\d+/g),n="",x=0;x<j.length&&3>x;x++)b=parseInt(j[x]).toString(16),n+=(2>b.length?"0":"")+b;return"#"+n};
String.prototype.template=function(b){if(!b)return this;for(var j=this,n=0;n<b.length;n++)j=j.replace(RegExp("\\{"+n+"\\}","gi"),b[n]);return j};Math.minMax=function(b,j,n){return $.isNumeric(j)?j<b?b:j>n?n:j:b};var getCoords=function(b){return b.touches&&0<b.touches.length?{x:Math.round(b.touches[0].clientX),y:Math.round(b.touches[0].clientY)}:null!=b.clientX?{x:Math.round(b.clientX),y:Math.round(b.clientY)}:{x:UNDEF,y:UNDEF}},_logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){DEBUG&&!_logover&&(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var j=navigator,n=[1,0,0],x,b=b?b.split("."):[0,0,0];if(typeof j.plugins!=UNDEF&&typeof j.plugins[SHOCKWAVE_FLASH]==OBJECT){if((x=j.plugins[SHOCKWAVE_FLASH].description)&&!(typeof j.mimeTypes!=UNDEF&&j.mimeTypes[FLASH_MIME_TYPE]&&!j.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))x=x.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),n[0]=parseInt(x.replace(/^(.*)\..*$/,"$1"),10),n[1]=parseInt(x.replace(/^.*\.(.*)\s.*$/,"$1"),10),n[2]=/[a-zA-Z]/.test(x)?parseInt(x.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var D=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(D&&typeof D.GetVariable!=UNDEF&&(x=D.GetVariable("$version")))x=x.split(" ")[1].split(","),n[0]=parseInt(x[0],10),n[1]=parseInt(x[1],10),n[2]=parseInt(x[2],10)}catch(v){}return n[0]>b[0]||n[0]==b[0]&&n[1]>b[1]||n[0]==b[0]&&n[1]==b[1]&&n[2]>=b[2]};
typeof Search!==UNDEF&&(Search.start=function(b){var j="FORM"===b.nodeName?$(b).find("input[type=search]").val().trim():$(b).text().trim(),n=$("<div>",{"class":"searchresults"}),x=0,D,v,B,Q,p,aa=RegExp("("+j.replace(/\s/g,"|")+")","gi");if(Search.data&&$.isArray(Search.data)&&Search.data.length&&j&&!(2>j.length)){n.append($("<h4>",{html:Search.text.headln+" &quot;<b>"+j+"</b>&quot;"}));for(j=0;j<Search.data.length;j++)for(D=0;D<Search.data[j][1].length;D++)if(aa.test(Search.data[j][1][D])){p=Search.data[j][1][D].split(Search.sep);
Q=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";v=Q+(Search.data[j][0]?Search.data[j][0]+"/":"");B=$("<a>",{href:v+(p[0].startsWith("#")?Search.indexName:"")+p[0]}).appendTo(n);B.append($("<aside>").append($("<img>",{src:p[0].startsWith("#")?p[0].toLowerCase().match(/.+\.(jpg|png)$/)?v+"thumbs/"+p[0].substr(1).replace(/%25/g,"%"):Q+"res/unknown.png":v+Search.folderThumb})));p[1]&&B.append($("<h5>",{text:p[1]}));p[2]&&p[2]!==p[1]&&B.append($("<p>",{text:p[2].trunc(192)}));for(v=3;v<
p.length;v++)p[v]&&p[v].trim().length&&B.append($("<p>",{text:p[v].trunc(192)}));x++}$(b).parents(".hint:first").fadeOut(100,function(){$(this).remove()});x?setTimeout(function(){n.find("a:first").focus()},250):n.append($("<p>",{text:Search.text.notFound}));$("body").addModal(n,{uid:"searchres",darkenBackground:!1,title:Search.text.title});return!1}});
(function(b){b.fn.logEvents=function(a){var d=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(d,function(a){a.target.id!=="log"&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+
"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return true})})};b.fn.trackCss=function(a,d,c){var c=c||20,f=new Date;return this.each(function(){var g=b(this),h=function(a){var b=new Date-f;log(b+"&nbsp;::&nbsp;"+a+" = "+g.css(a));b>d&&clearInterval(i)},i=setInterval(function(){if(b.isArray(a))for(var c=
0;c<a.length;c++)h(a[c]);else h(a)},c)})};b.fn.readData=function(a,d){if(a==null||d==null)return this;var d=d.split(","),c,f=d.length,g;return this.each(function(){for(c=0;c<f;c++)if((g=b(this).data(d[c]))!=null)a[d[c]]=g})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||b.browser.version>=8,cssFilter:b.browser.msie&&b.browser.version<=8,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,
{easeOutBack:function(a,b,c,f,g,h){h==null&&(h=1.70158);return f*((b=b/g-1)*b*((h+1)*b+h)+1)+c},easeOutCubic:function(a,b,c,f,g){return f*((b=b/g-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),d={width:a.width(),height:a.height()};if((d.width===0||d.height===0)&&a.css("display")==="none"){var c=a.css("position"),f=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});d.width=
a.width();d.height=a.height();a.css({display:"none",position:c,left:f})}return d};var j=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var n=j.length;n;)b.event.fixHooks[j[--n]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=j.length;a;)this.addEventListener(j[--a],x,false);else this.onmousewheel=x},teardown:function(){if(this.removeEventListener)for(var a=j.length;a;)this.removeEventListener(j[--a],x,false);else this.onmousewheel=null}};
b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var x=function(a){var d=a||window.event,c=[].slice.call(arguments,1),f=0,g=0,h=0,a=b.event.fix(d);a.type="mousewheel";d.wheelDelta?f=d.wheelDelta/120:d.detail&&(f=-d.detail/3);h=f;if(d.axis!==void 0&&d.axis===d.HORIZONTAL_AXIS){h=0;g=-1*f}d.wheelDeltaY!==void 0&&(h=d.wheelDeltaY/120);d.wheelDeltaX!==void 0&&(g=-1*d.wheelDeltaX/120);c.unshift(a,
f,g,h);return(b.event.dispatch||b.event.handle).apply(this,c)},D=function(a,b,c){if(arguments.length>1&&/^(string|number|boolean)$/.test(typeof b)){var f=new Date;f.setTime(f.getTime()+(typeof c!=="number"?1:c)*36E5);document.cookie=encodeURIComponent(a)+"="+String(b)+"; expires="+f.toGMTString()+"; path=/";return b}if(a)for(var a=a+"=",f=document.cookie.split(";"),g,h=0;h<f.length;h++){g=f[h].trim();if(g.indexOf(a)===0){g=g.substring(a.length);return/^(true|yes)$/.test(g)?true:/^(false|no)$/.test(g)?
false:/^([\d.]+)$/.test(g)?parseFloat(g):g}}return null},v={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(d){return a}},encoder:encodeURIComponent},B={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},
put:function(a){var b=this._document();b.open();b.close();v.put(a,b)},get:function(){return v.get(this._document())}},Q={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(a,d){var c;c=b.extend({unescape:false},d||{});var f=c.unescape;if(f===true)c=function(a){return a};else{if(c=typeof f=="string"){c=f.split("");var g=RegExp(b.map(c,encodeURIComponent).join("|"),"ig");c=f=function(a){return a.replace(g,decodeURIComponent)}}c=c||typeof f=="function"?function(a){return f(encodeURIComponent(a))}:
encodeURIComponent}v.encoder=c;p.callback=a;p._options=d;p._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=v.get();p._appState=a;p.callback(a);setInterval(p.check,100)},check:function(){var a=v.get();if(a!=p._appState){p._appState=a;p.callback(a)}},load:function(a){if(a!=p._appState){v.put(a);p._appState=a;p.callback(a)}}},iframeTimer:{_appState:void 0,_init:function(){var a=v.get();p._appState=a;B.init().put(a);p.callback(a);setInterval(p.check,100)},check:function(){var a=
B.get(),b=v.get();if(b!=a)if(b==p._appState){p._appState=a;v.put(a);p.callback(a)}else{p._appState=b;B.put(b);p.callback(b)}},load:function(a){if(a!=p._appState){v.put(a);B.put(a);p._appState=a;p.callback(a)}}},hashchangeEvent:{_init:function(){p.callback(v.get());b(window).on("hashchange",p.check)},check:function(){p.callback(v.get())},load:function(a){v.put(a)}}},p=b.extend({},Q.base);p.type=b.browser.msie&&(b.browser.version<8||document.documentMode<8)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":
"timer";b.extend(p,Q[p.type]);b.history=p;b.fn.addModal=function(a,d,c){typeof a==="string"&&(a=b(a));if(a instanceof b&&a.length){if(!b.isArray(d)){c=d;d=null}var c=b.extend({},b.fn.addModal.defaults,c),f,g=0,h=b(this).find("._m_window");if(h.length)h.empty();else{h=b("<div>",{"class":"_m_window",role:"modal"}).css({opacity:0}).appendTo(b(this));b(this).css({position:"relative"})}c.darkenBackground||h.css({backgroundImage:"none",backgroundColor:"transparent"});c.uid&&h.find("#"+c.uid).remove();var i=
b("<div>",{id:c.uid||"_mod_"+Math.floor(Math.random()*1E4),"class":"_m_panel"}).css({width:c.width}).appendTo(h),C=b("<header>",{"class":"_m_head"}).appendTo(i);C.append(b("<h5>",{text:c.title}));var k=function(){u.trigger("removeHint");f=clearTimeout(f);h.animate({opacity:0},c.speed,function(){i.remove();h.hide()});return false};if(c.closeOnClickOut&&c.darkenBackground)h.on("click",function(a){b(a.target).hasClass("_m_window")&&k(a);return true});var u=b("<a>",{href:NOLINK,"class":"close"}).appendTo(C);
if(b.support.touch)u[0].ontouchend=k;else{u.on("click",k);u.addHint(c.closeWindow)}var m=function(a){var d=i.position().left,f=i.position().top,m=getCoords(a);lm=h.width()-i.width()-c.pad;tm=h.height()-i.height()-c.pad;oc=C.css("cursor");C.css({cursor:"move"});var g=function(a){a=getCoords(a);i.css({left:Math.minMax(c.pad,d+a.x-m.x,lm),top:Math.minMax(c.pad,f+a.y-m.y,tm)});return false},y=function(){b(document).off({mousemove:g,mouseup:y});C.css("cursor",oc);return false};if(b.support.touch){this.ontouchmove=
g;this.ontouchend=y}else b(document).on({mousemove:g,mouseup:y});return false};if(b.support.touch)C[0].ontouchstart=m;else C.on("mousedown",m);var m=b("<div>",{"class":"_m_cont"}).appendTo(i),y=b("<div>",{"class":"_m_cont_i"}).append(a).appendTo(m);if(d&&d.length){for(var S,da=b("<div>",{"class":"buttons"}).appendTo(y),I=function(a){S.each(function(c){b(this).toggleClass("active",c===a)})},j=function(){b(document).off("keydown",r);k()},r=function(a){if(document.activeElement&&document.activeElement.nodeName===
"input"||b.isFunction(c.enableKeyboard)&&!c.enableKeyboard())return true;a=a.which;if(a===27){j();return false}if(da){var d=da.find("a.active"),f=S.index(d);switch(a){case 13:case 10:if(b.isFunction(d[0].handler)){d[0].handler.call();j();break}case 39:I((f+1)%S.length);break;case 37:I(f?f-1:S.length-1);break;default:return true}return false}return true},m=0;m<d.length;m++){m&&da.append(" ");a=b("<a>",{href:NOLINK,html:d[m].t}).appendTo(da);if(b.isFunction(d[m].h))a[0].handler=d[m].h;a.click(function(){this.handler!=
null&&this.handler.call();j();return false})}S=da.children("a");S.last().addClass("active");(b.isFunction(c.enableKeyboard)||c.enableKeyboard)&&b(document).keydown(r)}if(c.resizable){C.on("dblclick",function(){var a=[i.position().left,i.position().top,i.width(),i.height()],b=[c.pad,c.pad,h.width()-2*c.pad,h.height()-2*c.pad],d=function(a){i.css({left:Math.minMax(c.gap,a[0],h.width()-a[2]-c.gap),top:Math.minMax(c.gap,a[1],h.height()-a[3]-c.gap),width:a[2],height:a[3]});y.css({height:a[3]-g})};if(a[0]==
b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3])d(i.data("wpos"));else{d(b);i.data("wpos",a)}return false});d=b("<a>",{"class":"resize"}).appendTo(i);a=function(a){var c=i.width(),d=i.height(),f=getCoords(a),m=function(a){var a=getCoords(a),b=Math.max(d+a.y-f.y-g,20);i.css({width:Math.max(c+a.x-f.x,60),height:b+g});y.css({height:b});return false},h=function(){b(document).off({mousemove:m,mouseup:h});return false};if(b.support.touch){this.ontouchmove=m;this.ontouchend=h}else b(document).on({mousemove:m,mouseup:h});
return false};if(b.support.touch)d[0].ontouchstart=a;else d.on("mousedown",a)}setTimeout(function(){h.css({opacity:0}).show();var a=i.width(),b=i.height(),d=h.width(),m=h.height();g=b-y.height();if(a&&b&&d&&m){a+2*c.pad>d&&i.css({width:a=d-2*c.pad});if(b+2*c.pad>m){i.css({height:b=m-2*c.pad});y.css({height:m-2*c.pad-g})}i.css({left:Math.max(Math.round((d-a)/2),c.pad),top:Math.max(Math.round((m-b)/2),c.pad)});h.animate({opacity:1},c.speed);c.autoFade&&(f=setTimeout(k,c.autoFade))}},20);return this}};
b.fn.addModal.defaults={speed:250,autoFade:0,width:400,resizable:true,enableKeyboard:true,closeOnClickOut:true,closeWindow:"Close window",darkenBackground:true,pad:6};b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var d,c=b(this),f=b(this).parent(),g,h,i,C,k,u,m,y,S=0,j,I,p,r,n,x;c.css({position:"absolute",width:f.width-20});f.css({overflow:"hidden"});f.css("position")!=="absolute"&&f.css({position:"relative"});g=b("<div>",{"class":a.upbtn}).appendTo(f);
h=b("<div>",{"class":a.dnbtn}).appendTo(f);i=b("<div>",{"class":a.scbar}).appendTo(f);C=b("<div>").appendTo(i);k=g.add(h).add(i);k.hide();var v=function(){return c.position().top},H=function(a){return Math.round((i.height()-6)*-(a==null?v():a)/u)+3},E=function(){return Math.max(Math.round((i.height()-6)*m/u),a.dragMinSize)},z=function(b){b==null&&(b=v());g.css({opacity:b?1:a.disabledOpacity});h.css({opacity:b===m-u?a.disabledOpacity:1})},F=function(){return false},A=function(){var a=u,b=m;u=c.height();
m=f.height();if(a!==u||b!==m)if(u<=m){c.css({top:0}).off("selectstart",F);k.hide()}else{c.position().top<m-u&&c.css({top:m-u});C.css({top:H(),height:E()});c.on("selectstart",F);k.show();z()}},J=function(b){clearInterval(y);if(!(m>=u)){b=Math.minMax(m-u,b,0);C.stop(true,true).animate({top:H(b)},a.speed,a.effect);c.stop(true,true).animate({top:b},a.speed,a.effect,function(){z(b)})}};g.click(function(){J(v()+m);return false});h.click(function(){J(v()-m);return false});i.click(function(a){a.pageY<C.offset().top?
J(v()+m):a.pageY>C.offset().top+C.height()&&J(v()-m);return false});a.enableMouseWheel&&c.mousewheel(function(b,c){c&&J(v()+a.wheelIncr*(c<0?-1:1));return false});var D=function(a){C.css({top:Math.minMax(2,Math.round(a.pageY-C.data("my")),i.height()-C.height()-2)});c.css({top:Math.minMax(m-u,-Math.round((C.position().top-3)*u/(i.height()-6)),0)});z();return false},ta=function(){b(document).off("mousemove",D).off("mouseup",ta);return false};C.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-
b(this).position().top);b(document).on({mousemove:D,mouseup:ta});return false});var T=function(a){return S=a.touches&&a.touches.length>0?a.touches[0].clientY:a.clientY?a.clientY:S},B=function(){n=n+Math.round(r/20);var a=p+n;if(a>0||a<x)clearInterval(y);else{c.css({top:a});C.css({top:H(),height:E()});r=r*0.8;if(Math.abs(r)<10){r=0;clearInterval(y)}}},O=function(a){if(I){if(a=T(a)-I){c.data("dragOn",true);c.css({top:Math.minMax(x,j+a,0)});C.css({top:H(),height:E()})}}else I=T(a);return false},R=function(a){p=
v();var a=T(a)-I,d=(new Date).getTime()-tT;r=1E3*a/d;y=setInterval(B,50);if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off({mousemove:O,mouseup:R});setTimeout(function(){c.data("dragOn",false)},20);return Math.abs(a)<4&&d<300},U=function(a){if(m>=u||(a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||c.is(":animated")))return true;clearInterval(y);te=a;j=v();I=T(a);tT=(new Date).getTime();n=0;x=m-u;if(b.support.touch){b(a.target).closest("a").focus();
this.ontouchmove=O;this.ontouchend=R;return true}b(document).on({mousemove:O,mouseup:R});return false};if(b.support.touch)c[0].ontouchstart=U;else c.on("mousedown",U);b(window).resize(function(){clearTimeout(d);d=setTimeout(A,50)});d=setTimeout(A,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||A()},a.refresh);c.attr("role","scroll").data("dragOn",false).on("adjust",A);k.on("selectstart",F);c.find("a").on("setactive",function(){var a=b(this).parent()===c?b(this):b(this).parent(),
d=a.position().top,a=a.outerHeight(true),m=c.position().top,g=f.height();if(!(g>c.height())){if(d+a>g-m)m=Math.max(g-a-d,g-c.height());else if(d<-m)m=-d;else return;J(m)}});(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(function(c){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return true;switch(c?c.keyCode:window.event.keyCode){case 33:J(v()+m);return false;case 34:J(v()-m);return false}return true})})};
b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:true,enableMouseWheel:true,refresh:0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var d=b(this),c=b(this).parent(),f=0,g,h,i,C,k,u,m,y,j=b("<div>",{"class":a.scleft}).insertAfter(c),p=b("<div>",{"class":a.scright}).insertAfter(c),I=function(b){b=b==null?d.position().left:b;j.css({opacity:b<
0?1:a.disabledOpacity});p.css({opacity:c.width()<b+d.width()?1:a.disabledOpacity})},n=function(f){var m=c.width(),g=d.width();if(m&&g&&!(m>=g)&&b.isNumeric(f)){f>0?f=0:f<m-g&&(f=m-g);I(f);d.stop(true,false).animate({left:f},a.speed,a.effect)}};j.click(function(){n(d.position().left+c.width());return false});p.click(function(){n(d.position().left-c.width());return false});d.find("a").on("setactive",function(){var f=b(this).parent()===d?b(this):b(this).parent(),m=f.position().left,f=f.outerWidth(true),
g=Math.round(f*a.headRoom),h=d.position().left,y=c.width();d.find("a.active").removeClass("active");b(this).addClass("active");if(!(y>d.width())){if(m>y-f-g-h)h=Math.max(y-f-g-m,y-d.width());else if(m<-h+g)h=-m+g;else return;n(h)}});a.enableMouseWheel&&d.mousewheel(function(a,b){b&&n(d.position().left+c.width()*(b<0?-1:1));return false});I();var r=function(a){return f=a.touches&&a.touches.length>0?a.touches[0].clientX:a.clientX?a.clientX:f},v=function(){u=u+Math.round(k/20);var a=C+u;if(a>0||a<m)clearInterval(y);
else{d.css({left:a});k=k*0.8;if(Math.abs(k)<10){k=0;clearInterval(y)}}},x=function(a){if(h){if(a=r(a)-h){d.data("dragOn",true);d.css({left:Math.minMax(m,g+a,0)})}}else h=r(a);return false},D=function(a){C=d.position().left;var a=r(a)-h,c=(new Date).getTime()-i;k=1E3*a/c;y=setInterval(v,50);if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off({mousemove:x,mouseup:D});setTimeout(function(){d.data("dragOn",false)},20);return Math.abs(a)<4&&c<300},H=function(a){if((a.type==="touchstart"||
a.type==="touchmove")&&(!a.touches||a.touches.length>1||d.is(":animated")))return true;clearInterval(y);te=a;g=d.position().left;h=r(a);i=(new Date).getTime();u=0;m=c.width()-d.width();if(b.support.touch){b(a.target).closest("a").focus();this.ontouchmove=x;this.ontouchend=D;return true}b(document).on({mousemove:x,mouseup:D});return false};if(b.support.touch)d[0].ontouchstart=H;else d.on("mousedown",H);d.attr("role","scroll").data("dragOn",false);d.add(j).add(p).on("selectstart",function(a){a.preventDefault();
return false})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:true};b.fn.addSwipe=function(a,d,c){c=b.extend({},b.fn.addSwipe.defaults,c);return this.each(function(){var f=b(this),g=0,h=0,i=0,C=0,k,u,m,y,j,p,n,v,r,x,D,B;f.attr("draggable","true");var H=function(a){if(a.touches&&a.touches.length>0){g=a.touches[0].clientX;h=a.touches[0].clientY}else if(a.clientX){g=a.clientX;h=a.clientY}},E=
function(a){H(a);i=g;C=h},z=function(a){if(i){H(a);B?f.css({left:g-i+k}):f.css({left:g-i+k,top:h-C+u})}else E(a);return false},F=function(){return false},A=function(r){H(r);var j=(new Date).getTime()-m,r=g-i;if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off("mousemove",z).off("mouseup click",A);if(v<y)if(Math.abs(r)<c.treshold){B?f.animate({left:k},200):f.animate({left:k,top:u},200);f.trigger("click")}else{B?f.animate({left:f.position().left+Math.round(333*(g-i)/j)},500,
"easeOutCubic"):f.animate({left:f.position().left+Math.round(333*(g-i)/j),top:f.position().top+Math.round(333*(h-C)/j)},500,"easeOutCubic");r<0?b.isFunction(a)&&a.call():b.isFunction(d)&&d.call()}else{B?f.animate({left:Math.minMax(x,f.position().left+Math.round(333*(g-i)/j),c.margin)},500,"easeOutCubic"):f.animate({left:Math.minMax(x,f.position().left+Math.round(333*(g-i)/j),c.margin),top:Math.minMax(D,f.position().top+Math.round(333*(h-C)/j),c.margin)},500,"easeOutCubic");j=f.position().left;r<0?
j+v<p&&b.isFunction(a)&&a.call():j>n&&b.isFunction(d)&&d.call()}return false},J=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||f.is(":animated")))return true;E(a);O(a)},O=function(a){f.stop(true,false);k=f.position().left;u=f.position().top;m=(new Date).getTime();y=f.parent().outerWidth();j=f.parent().outerHeight();p=y*(1-c.oversizeTreshold);n=y*c.oversizeTreshold;v=f.outerWidth();r=f.outerHeight();x=y-c.margin-v;D=j-c.margin-r;B=r<=j;if(b.support.touch){this.ontouchmove=
z;this.ontouchend=A;return true}f.off("click");f.click(F);b(document).on({mousemove:z,mouseup:A});a.cancelBubble=true;return false};if(b.support.touch)this.ontouchstart=J;else f.on({dragstart:O,mousedown:E});f.on("dragcancel",function(){f.stop(true,false).animate({left:k,top:u},200);return false});f.on("unswipe",function(){if(b.support.touch)this.ontouchstart=this.ontouchend=this.ontouchmove=null;else{b.isFunction(f.noAction)&&f.off(F);b.isFunction(f.dragStart)&&f.off(O);b(document).off("mousemove",
z).off("mouseup",A)}});f.on("selectstart",F)})};b.fn.addSwipe.defaults={treshold:40,oversizeTreshold:0.15,margin:15};var aa=ALIGN_TOP=0,M=ALIGN_MIDDLE=1,la=ALIGN_BOTTOM=2;b.fn.alignTo=function(a,d){d=b.extend({},b.fn.alignTo.defaults,d);typeof a==="string"&&(a=b(a));if(a instanceof b&&a.length){var c=a.offset(),f=a.outerWidth(),g=a.outerHeight();return b(this).each(function(){var h=b(this).outerWidth(),i=b(this).outerHeight(),j=Math.round(c.left+d.toX*f/2+(d.toX-1)*d.gap);ry=Math.round(c.top+d.toY*
g/2+(d.toY-1)*d.gap);l=Math.round(j-d.posX*h/2);t=Math.round(ry-d.posY*i/2);t<0?d.toX!==M?t=0:d.toY!==ALIGN_BOTTOM&&(t=c.top+a.outerHeight()+d.gap):t+i>b(window).height()&&(d.toX!==M?t=b(window).height()-i:d.toY!==ALIGN_TOP&&(t=c.top-i-d.gap));l<0?d.toY!==ALIGN_MIDDLE?l=0:d.toX!=la&&(l=c.left+a.outerWidth()+d.gap):l+h>b(window).width()&&(d.toY!==ALIGN_MIDDLE?l=b(window).width()-h:d.toX!=aa&&(l=c.left-h-d.gap));b(this).css({position:"absolute",left:l,top:t})})}};b.fn.alignTo.defaults={gap:5,posX:M,
posY:ALIGN_BOTTOM,toX:M,toY:ALIGN_TOP};b.fn.addHint=function(a,d){if(a&&typeof a!=="string"&&!a.jquery){d=a;a=null}d=b.extend({},b.fn.addHint.defaults,d);return this.each(function(){var c=b(this),f=a||c.attr("title"),g,h=false,i=false,j=!(f&&f.jquery),k;if(f&&f.length){var u=function(){if(j){var a=b("#"+d.id);a.length||(a=b("<div>",{"class":d.id,id:d.id}).hide().appendTo("body"));k=a;k.empty().html(f)}else k=f.show();k.off("mouseover",m);k.off("mouseout",u);var m=function(){g=clearTimeout(g);h=true;
k.stop(true,true).css({opacity:1}).show()},u=function(){if(!i){g=clearTimeout(g);h=false;y()}};k.on("mouseover",m);k.on("mouseout",u);k.find("input").focus(function(){i=true;m()}).blur(function(){i=false});k.stop(true,true).alignTo(c,{posX:d.posX,posY:d.posY,toX:d.toX,toY:d.toY});k.css({opacity:0}).show().animate({opacity:1},200);b.support.touch?g=setTimeout(y,d.stay):h=true};c.on("removeHint",function(){m()});var m=function(){h=false;g=clearTimeout(g);y()},y=function(){!h&&(k&&k.length)&&k.stop(true,
false).animate({opacity:0},200,function(){b(this).hide()})};f.jquery?f.addClass(d.id):c.removeAttr("title");c.on(b.support.touch?{touchstart:u}:{"focus mouseenter":u,"blur mouseleave":m})}})};b.fn.addHint.defaults={id:"hint",stay:3E3,posX:M,posY:ALIGN_BOTTOM,toX:M,toY:ALIGN_TOP};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();var d,c=b("<div>",{id:a.id}).appendTo("body"),f=b("<div>",{"class":"panel"}).appendTo(c);f.css({width:a.width}).append(this);var g=function(){c.fadeOut(250,
function(){b(this).remove()})};c.fadeIn(250,function(){d=setTimeout(g,a.length)});f.css({marginTop:Math.max(Math.round((b(window).height()-f.outerHeight())*0.4),0)}).hover(function(){d=clearTimeout(d);b(this).stop(true,false).css("opacity",1)},function(){d=setTimeout(g,a.length)});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};b.fn.alertBox=function(a,d){if(!b.isArray(a)){d=a;a=null}d=b.extend({},b.fn.alertBox.defaults,d);b("#"+d.id).remove();var c=b("<div>",{id:d.id,role:"alertBox"}).appendTo("body"),
f=b("<div>",{"class":"panel"}).appendTo(c),g,h;f.append(this);f.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){j();return false}));a&&(g=b("<div>",{"class":"buttons"}).appendTo(f));f.css({width:d.width});var i=function(a){if(document.activeElement&&document.activeElement.nodeName==="input"||b.isFunction(d.enableKeyboard)&&!d.enableKeyboard())return true;a=a?a.keyCode:window.event.keyCode;if(a===27)j();else if(g){var c=g.find("a.active"),f=h.index(c);switch(a){case 13:case 10:if(b.isFunction(c[0].handler)){c[0].handler.call();
j();return false}case 39:k((f+1)%h.length);return false;case 37:k(f?f-1:h.length-1);return false}}return true},j=function(){b(document).off("keydown",i);c.fadeOut(250,function(){b(this).remove()})},k=function(a){h.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var u,m=0;m<a.length;m++){m&&g.append(" ");u=b("<a>",{href:NOLINK}).appendTo(g);u.html(a[m].t);if(b.isFunction(a[m].h))u[0].handler=a[m].h;u.click(function(){this.handler!=null&&this.handler.call();j();return false})}h=
g.children("a");h.last().addClass("active")}(b.isFunction(d.enableKeyboard)||d.enableKeyboard)&&w.keydown(keyhandler);c.fadeIn(250);f.css({marginTop:Math.max(Math.round((b(window).height()-f.outerHeight())*0.4),0)});return this};b.fn.alertBox.defaults={id:"modal",width:420,enableKeyboard:true};b.fn.equalHeight=function(){var a,d,c=0,f=0,g;return(g=b(this).length)<2?this:this.each(function(h){a=b(this);if(a.offset().top===c){d=d?d.add(a):a;f=Math.max(f,a.height());h===g-1&&f&&d.height(f)}else{d&&f&&
d.height(f);d=a;f=a.height();c=a.offset().top}})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),d=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),f=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("href"));return this.each(function(){var g=b(this);this.nodeName==="a"&&g.attr("href",NOLINK);var h=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&
!DEBUG)h.html(a.localWarning);else{a.facebookLike&&!a.useHash&&h.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&!a.useHash&&h.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+
d+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var i=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+d+'" data-width="110"></div>').appendTo(h);gapi.plusone.render(i[0])}a.tumblrBtn&&!a.useHash&&h.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+d+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');
a.facebook&&h.append('<a href="http://www.facebook.com/sharer.php?u='+d+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&h.append('<a href="http://twitter.com/home?status='+f+": "+d+'" class="twitter">Twitter</a>');a.gplus&&h.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+d,title:"Share on Google+",text:"Google+"}).on("click",function(){window.open(this.href,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=980,width=760");return false}));a.digg&&h.append('<a href="http://digg.com/submit?url='+
d+'" class="digg">Digg</a>');a.delicious&&h.append('<a href="http://delicious.com/save?url='+d+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&h.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+c+"&u="+d+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&h.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&h.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit">Reddit</a>');
h.children("a").attr("target","_blank");a.email&&h.append('<a href="mailto:?subject='+f+"&body="+c+"%0D%0A"+d+'" class="email">Email</a>')}g.addHint(h.appendTo("body"),a.pos).on("destroy",function(){h.remove()})})};b.fn.shareIt.defaults={id:"shares",useHash:true,likeBtnTheme:"light",facebookLike:true,twitterTweet:true,googlePlus:true,tumblrBtn:true,facebook:true,twitter:true,gplus:true,digg:true,delicious:true,myspace:true,stumbleupon:true,reddit:true,email:true,callTxt:"Found this page",pos:{posX:1,
posY:2,toX:1,toY:0},localWarning:"Can't share local albums. Please upload your album first!"};b.fn.addRegions=function(a,d,c){if(a&&a.length&&d){c=b.extend({},b.fn.addRegions.defaults,c);a.width();a.height();for(var f=[],g,h,i,j,k,u=d.split("::"),d=0;d<u.length;d++){g=u[d].split(";");g.length>4&&(g[0].length&&(h=parseFloat(g[1]))!=null&&(i=parseFloat(g[2]))!=null&&(j=parseFloat(g[3]))!=null&&(k=parseFloat(g[4]))!=null)&&f.push([g[0],(h-j/2)*100+"%",(i-k/2)*100+"%",j*100+"%",k*100+"%"])}return!f.length?
this:this.each(function(){var d=b(this),g,h;g=parseInt(d.css("padding-top"));this.nodeName==="a"&&d.attr("href",NOLINK);var i=b("<div>",{"class":c.id}).hide(),k=b("<div>",{"class":c.id+"-cont"}).css({left:g,top:g,right:g,bottom:g});for(n=0;n<f.length;n++){g=b('<a href="'+NOLINK+'">'+f[n][0]+"</a>").appendTo(i);h=b("<a>").css({left:f[n][1],top:f[n][2],width:f[n][3],height:f[n][4]}).append(b("<span>",{text:f[n][0]})).appendTo(k);g.hover(function(){k.children("a").eq(b(this).index()).addClass(c.active)},
function(){k.children("a").eq(b(this).index()).removeClass(c.active)});typeof Search!==UNDEF&&h.click(function(){Search.start(this);return false})}d.addHint(i.appendTo("body"),c.pos).on("destroy",function(){i.remove()});d.hasClass(c.active)&&k.addClass(c.active);d.click(function(){b(this).add(k).toggleClass(c.active)});a.append(k)})}};b.fn.addRegions.defaults={id:"regions",active:"active",pos:{posX:1,posY:2,toX:1,toY:0}};var O={flashVideo:[".flv.3gp.3g2",24],flash:[".swf",0],video:[".mp4.f4v.m4v",
24],html5Video:[".ogv.webm",30],qtVideo:[".qt.mov.mpg.mpeg.mpe",16],wmVideo:[".avi.wmv.asf.asx.wvx.mkv",64],audio:[".mp3.aac.m4a",24],html5audio:[".ogg.wav.ram.rm",30]},ua=function(a){a=a.getExt();if(!a.length)return null;for(var b in O)if(O[b][0].indexOf(a)>=0)return b;return null};b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),d=0,c=a.resPath?a.resPath+"/":"",f=function(a){var b="",c;for(c in a)b=b+('<param name="'+c+'" value="'+a[c]+'">');return b},g=function(a){var c=
b(a.target);if(c)if(b.browser.msie){c.hide();(function(){if(c.readyState==4){if(c){for(var a in c)typeof c[a]==="function"&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)})()}else c.remove()},h=function(g,h,m,i,j,p){var n="media"+d++;g.addClass("flplayer").css({width:m,height:i+O.flashVideo[1]});h="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+n+"&file="+encodeURIComponent(h)+"&image="+encodeURIComponent(j)+(p&&p.length?"&folder="+encodeURIComponent(p):
"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+"&controlbar.position=bottom";n='<object id="'+n+'" name="'+n+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';n=b.browser.msie?n+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+f({movie:c+a.swf}):n+('type="application/x-shockwave-flash" data="'+c+a.swf+'">');n=n+f({allowfullscreen:true,allowscriptaccess:"always",seamlesstabbing:true,wmode:"opaque",flashvars:h});return b(n).appendTo(g)},
i=function(c,f,m,g){var h="em"+d++;c.addClass("emplayer");return b('<embed class="otherplayer" id="'+h+'" src="'+f+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+m+'" height="'+g+'">').appendTo(c)},j=function(c,f,g,h,j,n){if((n=n!==UNDEF&&n)&&!Modernizr.audio||!n&&!Modernizr.video)return i(c,f,g,h);var p="ht"+d++,C=O.html5Video[1];c.addClass("h5player").css({width:g,height:h+C});c=b(n?"<audio>":"<video>",{id:p,src:f,width:g,height:h,controls:true,preload:"auto",poster:j,autoplay:a.auto,loop:a.loop}).appendTo(c);
if(b.isFunction(a.complete))c.on("ended",a.complete);return c};return this.each(function(){var k=b(this),u=null;k.readData(a,"file,folder,width,height,poster");if(a.file){switch(ua(a.file)){case "flashVideo":if(!b.support.flash){k.append(a.flashInstall);break}case "video":if(b.support.flash){u=h(k,a.file,a.width,a.height,a.poster);break}case "html5Video":u=j(k,a.file,a.width,a.height,a.poster);break;case "qtVideo":var u=a.file,m=a.width,y=a.height,n="qt"+d++,p=O.qtVideo[1];k.addClass("qtplayer").css({width:m,
height:y+p});m='<object id="'+n+'" width="'+m+'" height="'+(y+p)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+u+'">');m=m+f({src:u,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:true,postdomevents:true});k=b(m).appendTo(k);if(b.isFunction(a.complete))k.on("qt_ended",a.complete);u=k;break;case "wmVideo":u=a.file;m=a.width;y=a.height;n="wm"+d++;p=O.wmVideo[1];
k.addClass("wmplayer").css({width:m,height:y+p});m='<object id="'+n+'" width="'+m+'" height="'+y+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+u+'">');m=m+f({URL:u,SendPlayStateChangeEvents:true,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(m=m+"<a></a>");el=b(m).appendTo(k);if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});u=el;break;case "audio":if(b.support.flash){if(a.swf==b.fn.addPlayer.defaults.swf)u=
h(k,a.file,a.width,a.height,a.poster,a.folder);else{u=a.file;m=a.width;y=a.height;n=a.folder;k.addClass("flplayer").css({width:m,height:y});u="file="+encodeURIComponent(u)+(n&&n.length?"&folder="+encodeURIComponent(n):"")+"&autostart="+a.auto+"&loop="+a.loop;m='<object width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';m=b.browser.msie?m+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+f({movie:c+a.swf}):m+('type="application/x-shockwave-flash" data="'+c+a.swf+'">');m=m+f({wmode:"opaque",
flashvars:u});u=b(m).appendTo(k)}break}case "html5audio":u=j(k,a.file,a.width,a.height,a.poster,true);break;default:u=i(k,a.file,a.width,a.height)}u.on("destroy",g)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:false,loop:false,fit:true,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var d=
b(this),c=d.find(a.selector);if(c.length){var f,g,h,i,j,k=a.marginLeft+a.padding;f=a.marginRight+a.padding;var n=a.marginTop+a.padding,m=a.marginBottom+a.padding;g=c.data("ow");h=c.data("oh");if(!g||!h){c.data("ow",g=c.width());c.data("oh",h=c.height())}if(!(i=c.data("bw")))c.data("bw",i=parseInt(c.css("border-top-width"))||0);if(!(j=c.data("pw")))c.data("pw",j=parseInt(c.css("padding-top"))||0);f=(d.innerWidth()||b("body").width())-2*(i+j)-k-f;d=(d.innerHeight()||b("body").height())-2*(i+j)-n-m;
if(a.fit&&(g>f||h>d||a.enlarge)){i=Math.min(f/g,d/h);g=Math.round(g*i);h=Math.round(h*i)}i=Math.round((f-g)/2)+k;j=Math.round((d-h)/2)+n;if(a.animate){c.stop(true,false);if(a.preScale&&a.preScale!==1){var m=g*a.preScale,y=h*a.preScale;c.css({left:Math.round((f-m)/2)+k,top:Math.round((d-y)/2)+n,width:Math.round(m),height:Math.round(y)})}else a.init&&c.css({left:i,top:j});c.animate({left:i,top:j,width:g,height:h},{duration:a.speed,easing:a.effect,complete:a.complete})}else{c.css({left:i,top:j,width:g,
height:h});b.isFunction(a.complete)&&a.complete.call(this)}}})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:true,enlarge:true,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:false,animate:false,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),d;b.fn.addInput=function(a,d,g,h){var i;return!a||d==null?this:this.each(function(){i=b("<input>",{type:g||"text"}).appendTo(b(this));i.attr("name",a);i.addClass(a);i.val(typeof d===
"string"?d.stripQuote():d);h&&i.prop(h,h)})};b.fn.addSelect=function(a,f,g){return!a.length?this:this.each(function(){var h=b(this),h=b("<select>").appendTo(h);for(d=0;d<a.length;d++)h.append(b("<option>",{val:a[d].val,text:a[d].key+" ("+f+" "+a[d].val+")"}));b.isFunction(g)&&h.change(g)})};return this.each(function(){var c=b(this),f,g,h;c.readData(a,"gateway,id,currency,handling,options,file");if(!(a.id==null||a.options==null||a.file==null)){id=a.gateway=="paypal"?{form:"paypal",seller:"business",
currency:"currency_code",title:"item_name",select:"item_number",price:"amount",copies:"quantity",shipprice:"shipping",shipprice2:"shipping2",handling:"handling_cart",shopUrl:"shopping_url"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};var i=a.options.split("::"),j,k=[];for(d=0;d<i.length;d++){j=i[d].split("=");
j.length>1&&k.push({key:j[0],val:j[1]})}a.id=a.id.replace("|","@");var n=function(c){var d=g.children("[name^="+id.shipprice+"]");if(c===null||c===false||!b.isNumeric(c))a.gateway==="paypal"?d.remove():d.val(0);else if(d.length)d.val(c);else if(a.gateway==="paypal"){g.addInput(id.shipprice,c,"hidden");a.shippingFlat||g.addInput(id.shipprice2,c,"hidden")}},i=function(){var b=f.length?f.children("select").eq(0):false;if(b&&b.length){var c,b=b.val().split("+");q=f.children("[name=copies]").val()||1;
if(a.quantityCap&&q>a.quantityCap)f.children("[name=copies]").val(q=a.quantityCap);(c=f.children("[name=total]"))&&c.val((b[0]*q).toFixed(2));(c=g.children("[name="+id.price+"]"))&&c.val(b[0]);(c=g.children("[name="+id.copies+"]"))&&c.val(q);n(b.length>1?b[1]:null);(c=g.children("[name="+id.select+"]"))&&c.val(f.find("option:selected").text())}};f=b("<form>",{name:"shopping",method:"post"}).appendTo(c);f.addSelect(k,a.currency,i);a.quantityCap!=1&&f.append("x").addInput("copies",1);f.append("=").addInput("total",
k[0].val.split("+")[0],"text","readonly");f.children("[name=copies]").css({width:"3em"}).change(i);f.children("[name=total]").css({width:"5em"});f.append(a.currency);if(a.gateway==="paypal"){h=k[0].val.split("+");g=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);g.addInput("cmd","_cart","hidden");g.addInput("add",1,"hidden");g.addInput(id.seller,a.id,"hidden");g.addInput(id.copies,1,"hidden");g.addInput(id.price,h[0],"hidden");g.addInput(id.currency,
a.currency,"hidden");n(h.length>1?h[1]:null);a.handling!=null&&b.isNumeric(a.handling)&&g.addInput(id.handling,a.handling,"hidden");g.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");g.addInput(id.select,k[0].key+" ("+a.currency+" "+k[0].val+")","hidden");g.addInput(id.shopUrl,window.location.href,"hidden");g.addInput("charset","utf-8","hidden");g.addInput("lc",a.locale,"hidden");g.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",
alt:"Add to Cart"}));h=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);h.addInput("cmd","_cart","hidden");h.addInput("display",1,"hidden");h.addInput(id.seller,a.id,"hidden");h.addInput("lc",a.locale,"hidden");h.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))}else if(a.gateway==="google"){i=a.id.match(/(\d+)/)[0];g=b("<form>",
{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+i+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(c);g.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");g.addInput(id.select,k[0].key,"hidden");g.addInput(id.copies,1,"hidden");g.addInput(id.price,k[0].val.split("+")[0],"hidden");g.addInput(id.currency,a.currency,"hidden");if(a.shipping!=null&&b.isNumeric(a.shipping)){g.addInput(id.shipmethod,"normal","hidden");g.addInput(id.shipprice,
a.shipping,"hidden");g.addInput(id.shipcurrency,a.currency,"hidden")}g.addInput("_charset_","","hidden");g.append(b("<input>",{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+i+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,width:160}))}g.add(h).find("input[name=submit]").on("submit",function(){window.open("",a.target,"width=960,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");
return true})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal",locale:"US",quantityCap:0,shippingFlat:false};var va=function(a){if(a==null)return null;if(typeof a==="string"){a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a);return new google.maps.LatLng(a[1],a[2])}return new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(!google||!google.maps)return this;var a=b.extend({},b.fn.setupMap.defaults,a),d=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,
new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,
24))};return this.each(function(){var f=b(this),g,h,i,j,k;f.readData(a,"type,zoom,map,label,resPath,markers");var n=function(){if(f.data("fresh"))if(f.is(":visible")&&!f.parents(":hidden").length&&f.width()&&f.height()){clearTimeout(k);f.width(f.parents(".cont").width()-30);google.maps.event.trigger(i,"resize");i.setCenter(g);f.data("fresh",false)}else k=setTimeout(n,200)};j&&j.length&&j.remove();j=b("<div>").css({position:"absolute",top:"-9000px",width:f.width(),height:f.height()}).appendTo("body");
f.data("fresh",true).on({adjust:n,destroy:function(){i.getParentNode().removeChild(i);b(window).unbind("resize",n)}});if(a.markers&&a.markers.length&&a.curr!=null)g=a.markers[a.curr].map;else if(a.map){g=va(a.map);h=a.label}else return;setTimeout(function(){var m=new google.maps.Map(j[0],{zoom:a.zoom,center:g,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(m,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=m.getMapTypeId()});google.maps.event.addListener(m,"zoom_changed",
function(){b.fn.setupMap.defaults.zoom=m.getZoom()});if(a.markers&&a.markers.length>1)for(var n,k,p=Math.min(a.curr+a.range,a.markers.length),u=Math.max(a.curr-a.range,0);u<p;u++){k=a.markers[u];n={position:k.map,map:m,title:k.label,zIndex:u};if(u==a.curr)n=new google.maps.Marker(b.extend(n,d));else{n=new google.maps.Marker(b.extend(n,c));if(jQuery.isFunction(a.click)&&k.link){n.link=k.link;google.maps.event.addListener(n,"click",function(){a.click.call(this)})}}}else n=new google.maps.Marker(b.extend({position:g,
map:m,title:h},d));j.css({top:0}).appendTo(f);i=m},20);b(window).resize(function(){clearTimeout(k);f.data("fresh",true);k=setTimeout(n,100)})})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);if(a.markNewDays){var d=Math.round((new Date).getTime()/864E5);return this.each(function(){d-parseInt(b(this).data("modified")||0)<=a.markNewDays&&b(this).after(a.newLabel)})}};b.fn.markFoldersNew.defaults={markNewDays:7,
newLabel:"NEW"};b.fn.fullScreen=function(a){var b=function(a,b){b=b==="FullScreen"&&vend==="webkit"?vend+"Is"+b:vend&&vend+b||b.substr(0,1).toLowerCase()+b.substr(1);return typeof a[b]==="function"?a[b]():a[b]};return typeof a===UNDEF?b(this[0],"FullScreen"):this.each(function(){s=b(this,"FullScreen");a?s||b(this,"RequestFullScreen"):s&&b(this,"CancelFullScreen")})};b.fn.turtleHelp=function(a,d){var a=b.extend({},b.fn.turtleHelp.defaults,a),d=b.extend({},b.fn.turtleHelp.texts,d),c=b(a.templ.template(d.help)),
f=function(){b("body").addModal(c,{uid:"help",title:a.title.template(d.help),width:680})};a.useF1&&!b.support.touch&&b(document).keydown(function(c){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#help:visible").length)return true;if(c.which===112){f();return false}return true});return this.each(function(){b(this).click(function(){f();return false})})};b.fn.turtleHelp.defaults={useF1:true};b.fn.turtleHelp.texts={help:["Using Turtle gallery",
"Top <b>navigation</b> bar with <b>Home</b> button","<b>Up</b> one level <em>Up arrow</em>","Author or company <b>information</b>","<b>Share</b> and <b>Like</b> buttons for social networking","<b>Search</b> button","Start slideshow <em>Numpad *</em>","Previous image <em>Left arrow</em>","Back to index page <em>Esc</em>","Toggle zoom (fit/1:1) <em>Numpad +</em>","Toggle info window <em>Numpad -</em>","Toggle thumbnail scoller","Start / Stop slideshow <em>Numpad *</em>","Next image <em>Right arrow</em>",
"Swipe for previous / next image"]};b.fn.turtleGallery=function(a,d,c){a=b.extend({},b.fn.turtleGallery.defaults,a);d=b.extend({},b.fn.turtleGallery.texts,d);c=b.extend({},b.fn.turtleGallery.ids,c);setTimeout(function(){if(!a.licensee&&(typeof _jaShowAds==UNDEF||_jaShowAds)&&location.protocol.startsWith("http")&&!D("ls")){var c=a.resPath+"/logo.png";b(new Image).load(function(){var a=b("<div>").css({background:"url("+c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h3>Turtle skin<h3></h3><p>Unlicensed</p>");
b("body").addModal(a,{width:220,autoFade:500});D("ls",true)}).attr("src",c)}},1E3);for(var f=["thumbsOn","infoOn","metaOn","mapOn","regionsOn","shopOn","shareOn","printOn","fitImage"],g=function(b,c){location.protocol.startsWith("file")||D(b,c);a[b]=c},h,j=0;j<f.length;j++)if(h=D(f[j]))a[f[j]]=h;if(b.support.touch)a.preScale=false;b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.setupShop.defaults.gateway=a.shopGateway;
b.fn.setupShop.defaults.id=a.shopId;b.fn.setupShop.defaults.path=(a.albumName||"")+": "+a.relPath;b.fn.setupShop.defaults.currency=a.shopCurrency||"EUR";b.fn.setupShop.defaults.handling=a.shopHandling||null;b.fn.setupShop.defaults.locale=a.shopLocale||"US";b.fn.setupShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;
b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(j in a.shares)b.fn.shareIt.defaults[j]=a.shares[j];b.fn.shareIt.defaults.callTxt=d.checkOutThis;var n=function(b){var d=b.data(c.caption);if(d)return d.stripHTML();return(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},k='<span class="'+c.newItem+'">'+d.newItem+"</span>",u=Math.round((new Date).getTime()/
864E5);return this.each(function(){var f=b(this).find("li > a"),h,j,i,p,v,r={},x,D,B,H,E,z=null,F=null,A=0,J,Q,M=b(window).width(),T=b(window).height(),aa=[],la=function(d){if(document.activeElement&&(document.activeElement.nodeName==="INPUT"||document.activeElement.nodeName==="TEXTAREA")||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return true;if(h.is(":visible"))switch(d.which){case 27:U();break;case 37:var d=b("."+c.main),g=b("."+c.img);if(d.length)if(d.position().left>=a.fitPadding)ga();
else{g=Math.round(g.width()*0.8);d.animate({left:Math.min(d.position().left+g,a.fitPadding)},a.scrollDuration)}break;case 38:d=b("."+c.main);g=b("."+c.img);if(d.length&&!(d.position().top>a.fitPadding)){g=Math.round(g.width()*0.8);d.animate({top:Math.min(d.position().top+g,a.fitPadding)},a.scrollDuration)}break;case 39:d=b("."+c.main);g=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=g.width()-a.fitPadding)W();else{var j=Math.round(g.width()*0.8);d.animate({left:Math.max(d.position().left-
j,g.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);g=b("."+c.img);if(d.length&&!(d.position().top+d.outerHeight()<=g.height()-a.fitPadding)){j=Math.round(g.width()*0.8);d.animate({top:Math.max(d.position().top-j,g.height()-a.fitPadding-d.outerHeight())},a.scrollDuration)}break;case 97:case 35:N(f.length-1);break;case 103:case 36:N(0);break;case 106:case 179:if(J)X();else{a.slideshowFullScreen&&h.fullScreen(true);ba()}break;case 107:a.fitImage?wa():xa();break;
case 109:if(a.infoOn||a.thumbsOn){ya();za()}else{Aa();Ba()}break;default:return true}else switch(d.which){case 13:case 10:N();break;case 27:R();break;case 37:A=(A?A:f.length)-1;V();break;case 38:A&&a.cols&&(A=Math.max(0,A-a.cols));V();break;case 39:A=(A+1)%f.length;V();break;case 40:A<f.length-1&&a.cols&&(A=Math.min(f.length-1,A+a.cols));V();break;case 97:case 35:A=f.length-1;V();break;case 103:case 36:A=0;V();break;case 106:case 179:a.slideshowFullScreen&&h.fullScreen(true);N();ba();break;default:return true}return false},
R=function(){window.location.href=a.uplink||"../"},U=function(){var c=b("[role=main]");if(h.is(":visible")){X();a.slideshowFullScreen&&b(document).fullScreen(false);if(a.skipIndex)R();else{if(c.length&&c.is(":hidden")){c.children().andSelf().css({visibility:"visible",display:"block"});c.find(".folders>ul>li").equalHeight();c.find(".thumbs>ul>li p").length&&c.find(".thumbs>ul>li").equalHeight();c.find("[role=scroll]").trigger("adjust")}a.transitions?h.fadeOut(a.speed):h.hide();a.hash!=="no"&&b.history.load("")}}else c.length&&
c.is(":hidden")&&c.children().andSelf().css({visibility:"visible",display:"block"});c.find("[role=scroll]").data("dragOn",false)},sa=function(){var a=f.eq(A).attr("href");return a&&a.substr(a.lastIndexOf("/")+1)},V=function(a){f.filter("."+c.active).removeClass(c.active);f.eq(A).addClass(c.active);(typeof a===UNDEF||a===false)&&f.eq(A).trigger("setactive");D.eq(A).trigger("setactive")},ga=function(){X();A?N(A-1):a.afterLast==="startover"?N(f.length-1):z.find("."+c.main).trigger("dragcancel")},W=function(){if(A<
f.length-1){ma();N(A+1)}else if(a.afterLast==="startover"||J&&a.slideshowLoop){ma();N(0)}else{if(a.afterLast==="onelevelup"){if(a.uplink){R();return}}else if(a.afterLast==="backtoindex"){if(!a.skipIndex){U();return}}else if(a.afterLast==="ask"){X();var g=Array({t:d.startOver,h:function(){N(0)}});a.uplink&&g.push({t:a.level>0?d.upOneLevel:d.homepageLinkText||d.backToHome,h:function(){R()}});a.skipIndex||g.push({t:d.backToIndex,h:function(){U()}});b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),
g,{uid:"dialog",title:d.atLastPage,width:480,resizable:false})}z.find("."+c.main).trigger("dragcancel")}},ma=function(){if(J){clearInterval(J);J=setInterval(W,a.slideshowDelay)}},ba=function(){r.play.hide();r.pause.showin();J=setInterval(W,a.slideshowDelay);K()},X=function(){r.pause.hide();r.play.showin();J=clearInterval(J);K()},Ca=function(){if(!H){p.stop(true,false).css({opacity:0.7}).fadeIn(200,function(){b.support.cssFilter&&p.css("filter",null)});E=setTimeout(function(){K()},1500)}},K=function(){if(H)E=
setTimeout(function(){K()},500);else{E=clearTimeout(E);p.fadeOut(300)}},Ha=function(){if(p.is(":visible")){E=clearTimeout(E);p.fadeOut(300)}else Ca()},ya=function(){if(a.infoOn){r.hideInfo.hide();r.showInfo.showin();a.transitions?v.animate({bottom:-v.outerHeight()},500,function(){v.hide()}):v.css({bottom:-v.outerHeight()}).hide();K();g("infoOn",false)}},Aa=function(){if(!a.infoOn){r.showInfo.hide();r.hideInfo.showin();v.is(":hidden")&&v.show().css({bottom:-v.outerHeight()});var b=function(){v.children("."+
c.map).trigger("adjust")};if(a.transitions)v.animate({bottom:0},500,b);else{v.show().css({bottom:0});b()}K();g("infoOn",true)}},za=function(){if(a.thumbsOn){r.hideThumbs.hide();r.showThumbs.showin();a.transitions?i.animate({top:-x.outerHeight()-10},500):i.css({top:-x.outerHeight()-10});z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:0});K();g("thumbsOn",false)}},Ba=function(){if(!a.thumbsOn){r.showThumbs.hide();r.hideThumbs.showin();a.transitions?i.animate({top:0},500):i.css({top:0});z&&
a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:x.outerHeight()});K();g("thumbsOn",true)}},ea=function(){return a.fitFreespace&&i.position().top>=0?x.outerHeight()||0:0},wa=function(){r.noresize.hide();r.resize.showin();z.centerThis({fit:false,marginTop:ea()});K();g("fitImage",false)},xa=function(){r.resize.hide();r.noresize.showin();z.centerThis({fit:true,marginTop:ea()});K();g("fitImage",true)},Da=function(a){if(!(a<0||a>=f.length)){var d=f.eq(a).children("img").eq(0);!d.data(c.isvideo)&&
(!d.data(c.isother)&&!d.data("cached")&&(s=d.data(c.src)))&&b("<img>").load(function(){d.data("cached",true)}).attr({src:s})}},ha=function(a){a.trigger("destroy");a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},N=function(i){h.is(":hidden")&&(a.transitions?h.fadeIn(a.speed):h.show());if(typeof i!==UNDEF&&i!=null){var k;if(i==null)k=A;else if(typeof i==="number")k=Math.minMax(0,i,f.length);else if((k=f.index(i))<0)k=D.index(i);i=k}else i=A;if(!(z&&z.data("curr")===
i)){var r,p=f.eq(i),u,x,p=p.children("img").eq(0);if(p.length){if(z){if(F&&F.length){F.stop();ha(F);F.remove()}F=z;F.css({zIndex:0});F.find("."+c.main).trigger("unswipe").off("touchstart");F.unmousewheel()}(r=h.children("."+c.img).not(z)).length&&r.stop().remove();z=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).data({curr:i}).on("click",function(a){if(b(a.target).hasClass("img")){U();return false}}).appendTo(h);j.css({opacity:0,display:"block"}).animate({opacity:1});A=i;V();var B=b("<div>",
{"class":c.main});if(p.data(c.isother)||!(u=p.data(c.src))){r=Math.max(p.data(c.width)||h.width()-160,280);k=Math.max(p.data(c.height)||h.height()-120,200);x=p.clone();B.addClass(c.other);if((u=p.data(c.content))&&(u=u.trim()).length)B.css({width:r,height:k}).append(u.startsWith("http://")?b("<iframe>",{width:"100%",height:"100%",src:u,frameborder:0,allowfullscreen:"allowfullscreen"}):u);else{B.append(b("<a>",{href:p.data(c.link),target:"_blank"}));B.append(b("<p>",{text:d.clickToOpen}));B.children("a:first").append(x)}na(B)}else if(p.data(c.isvideo)||
p.data(c.isaudio)){r=p.data(c.width)||h.width()-160;k=p.data(c.height)||h.height()-120;var G=J;G&&X();if(p.data(c.isvideo)){u=h.width()-40;x=h.height()-40;var H=p.data(c.link),H=ua(H);k=k+(H&&O[H][1]||0);if(r>u||k>x){u=Math.min(u/r,x/k);r=Math.round(r*u);k=Math.round(k*u)}}else{r=Math.max(280,p.attr("width")||0);k=Math.max(280,p.attr("height")||0)}B.addClass(c.other).css({width:r,height:k}).data({ow:r,oh:k});el=B.addPlayer({complete:function(){if(G){W();ba()}},file:p.data(c.link),resPath:a.resPath,
poster:p.data(c.poster)||p.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:r,height:k});B.data("media",el);na(B)}else{r=p.data(c.width);k=p.data(c.height);x=b(new Image);B.addClass(c.image).append(x).css({width:r,height:k}).data({ow:r,oh:k});x.load(function(){p.data("cached",true);na(B)}).attr({src:u,width:r||"auto",height:k||"auto"})}var E=p;v=b("<div>",{"class":c.bottom});z.append(v);var I=b("<div>",{"class":c.cont}).appendTo(v),K=b("<nav>").appendTo(I),L,Q;r=Math.round(z.width()*0.8)-30;I.width()>
r&&I.width(r);a.showImageNumbers&&I.append('<div class="nr"><strong>'+(i+1)+"</strong> / "+f.length+"</div>");(L=E.data(c.caption))&&I.append(L);var M,P;r=[c.meta,c.map,c.shop,c.share,c.print,c.comment];for(u=0;u<r.length;u++){P=r[u];if(E.data(P)!=null){M=b("<div>",{"class":c.panel+" "+c[P]}).data("rel",P).appendTo(I);M.append(b("<div>",{"class":c.icon}));i=b("<a>",{href:NOLINK,"class":P+"-"+c.icon,text:" "}).appendTo(K);i.data("rel",P).addHint(d[P+"Btn"]||P);i.click(function(){var d=b(this).data("rel"),
f=I.children("."+d);o=f.is(":hidden");b(this).toggleClass(c.active,o);if(d===c.map){var h=function(){o&&f.children("."+c.mapcont).trigger("adjust")};if(a.transitions)f.slideToggle("fast",h);else{f.toggle();setTimeout(h,50)}}else a.transitions?f.slideToggle("fast"):f.toggle();g(d+"On",o)})}}if(!E.data(c.isvideo)&&!E.data(c.isaudio)&&!E.data(c.isother)){if(a.fotomotoOn){var R=b("<a>",{href:NOLINK,"class":c.fotomoto+"-"+c.icon,text:" "}).appendTo(K);R.addHint(location.protocol.startsWith("file:")?d.locationWarning:
d.fotomotoHint);setTimeout(function(){typeof FOTOMOTO!==UNDEF&&!location.protocol.startsWith("file:")&&R.click(function(){FOTOMOTO.API.showWindow(10,E.attr("src").replace(a.thumbs+"/",a.slides+"/"));return false})},a.speed)}if(E.data(c.regions)){i=b("<a>",{href:NOLINK,"class":c.regions+"-"+c.icon,text:" "}).appendTo(K);a[c.regions+"On"]&&i.addClass(c.active);i.click(function(){g(c.regions+"On",!b(this).hasClass(c.active))})}}if(!a.rightClickProtect&&(L=E.data(c.link))){i=b("<a>",{href:L,"class":c.link+
"-"+c.icon,target:"_blank",text:" "}).appendTo(K);i.addHint("<strong>"+(E.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br><small>"+d.saveTip+"</small>")}if(a.shareOn){var T=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(K);Q=a.hash==="number"?A+1:sa();setTimeout(function(){T.shareIt({hash:Q})},a.speed)}z.append(v);I.children("."+c.panel).each(function(){M=b(this);if((P=M.data("rel"))&&(L=E.data(P))!=null){if(P===c.map){var d=b("<div>",{"class":c.mapcont}).appendTo(M);d.width(I.width()-
30);a.mapAll?d.setupMap({click:function(){N(this.link)},markers:aa,curr:parseInt(E.data(c.mapid))}):d.setupMap({map:L,label:n(E)});setTimeout(function(){d.trigger("adjust")},a.speed)}else P===c.shop?M.addClass("clearfix").setupShop({file:E.attr("src").replace("thumbs/",""),options:L}):M.append(L);a[P+"On"]?K.children("a."+P+"-icon").addClass(c.active):M.hide()}});K.html().length||K.remove();a.infoOn||v.hide()}}},na=function(d){if(a.transitions){j.stop(true,false).animate({opacity:0},{duration:100,
complete:function(){b(this).hide()}});if(F){var g=F;F.stop(true,false).animate({opacity:0},{duration:a.speed/2,complete:function(){ha(g);g.remove()}});F=null}}else{j.hide();if(F){F.stop();ha(F);F.remove()}}var h=d.hasClass(c.image);z.children().not("."+c.bottom).remove();z.append(d);if(a.rightClickProtect)d.on("contextmenu",function(a){a.preventDefault();return false});a.enableMouseWheel&&z.mousewheel(function(a,b){b>0?ga():W();return false});setTimeout(function(){if(b.support.touch)d.on("touchstart",
Ha);else f.length>1&&h&&d.click(function(){W();return false});f.length>1&&d.addSwipe(function(){b(this).trigger("unswipe");W()},function(){b(this).trigger("unswipe");ga()})},a.speed/2);a.transitions?z.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?function(){z.css({filter:""})}:null}).centerThis({init:true,speed:Math.round(a.speed*0.75),marginTop:ea(),preScale:h&&a.preScale,animate:h&&a.preScale&&a.preScale!=1,fit:a.fitImage}):z.show().centerThis({init:true,
marginTop:ea(),fit:a.fitImage});var i=A,k=z.find("nav a."+c.regions+"-icon").eq(0);if(k.length){i=f.eq(i).find("img:first");k.addRegions(z.find("."+c.main).eq(0),i.data(c.regions))}Da(A+1);Da(A-1);if(a.hash==="number")b.history.load(A+1);else if(a.hash==="fileName")(k=sa())&&b.history.load(k)};if(f.length){if(a.header!=null){var G=b(a.header);if(G.length){if(a.showStart){var ia=b("<div>",{"class":c.startBtn,text:" "}).appendTo(G),Ea=b("<div>",{"class":c.startTxt,text:d.startSlideshow}).appendTo(G);
ia.mouseenter(function(){Ea.stop(true,false).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){Ea.stop(true,false).fadeOut(500)}).click(function(){a.slideshowFullScreen&&h.fullScreen(true);N();ba();return false})}ia=G.find("."+c.parent+">a");if(ia.length)a.uplink=ia.attr("href")}}h=b("<div>",{"class":c.gallery}).attr("role","gallery").appendTo("body");j=b("<div>",{"class":c.wait}).appendTo(h);var L=i=b("<div>",{"class":c.navigation}).appendTo(h),ca,Y,oa,Z,fa,pa=0;e=b("<div>",{"class":c.scrollbox}).appendTo(L);
tc=b("<div>",{"class":"wrap"}).appendTo(e);tc=b("<ul>",{"class":c.cont}).appendTo(tc);f.each(function(d){L=b(this);if(a.rightClickProtect)L.on("contextmenu",function(a){a.preventDefault();return false});Z=L.find("img").eq(0);fa=L.attr("href");if(Z.length&&fa){Y=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc));oa=b("<img>").appendTo(Y);Z.data(c.src,fa);Z.attr("src").endsWith("/"+a.loadImg)?Z.add(oa).attr("src",a.thumbs+"/"+fa.substring(fa.lastIndexOf("/")+1).fixExtension()):oa.attr("src",Z.attr("src"));
if((ca=L.attr("title"))&&ca.length)L.add(Y).addHint(ca);else{ca=L.next();ca.length&&Y.addHint(ca.html())}a.markNewDays&&u-parseInt(Z.data(c.modified)||0)<=a.markNewDays&&L.add(Y).append(k);L.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===true)return false;if(!b(this).hasClass(c.active)&&z&&z.length){z.stop();ha(z);z.remove()}N(f.eq(d));return false});Y.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===true)return false;b(this).hasClass(c.active)||N(f.eq(d));
b(this).trigger("active");return false});pa=pa+Y.outerWidth(true)}});tc.width(pa).scrollThumbs({enableMouseWheel:a.enableMouseWheel});x=e;D=x.find(".cont a");G=b("<nav>",{"class":"controls clearfix"}).appendTo(i);r.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(G);r.prev.click(function(){X();ga();return false});r.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:d.backToIndex}).appendTo(G);r.up.click(function(){X();U();return false});r.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(G);
r.noresize.click(function(){wa();return false});r.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(G);r.resize.click(function(){xa();return false});if(a.fitImage){r.resize.hide();r.noresize.showin()}else{r.noresize.hide();r.resize.showin()}r.hideInfo=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(G);r.hideInfo.click(function(){ya();return false});r.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(G);r.showInfo.click(function(){Aa();return false});if(a.infoOn){r.showInfo.hide();
r.hideInfo.showin()}else{r.hideInfo.hide();r.showInfo.showin()}r.hideThumbs=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(G);r.hideThumbs.click(function(){za();return false});r.showThumbs=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(G);r.showThumbs.click(function(){Ba();return false});if(a.thumbsOn){r.showThumbs.hide();r.hideThumbs.showin()}else{r.hideThumbs.hide();r.showThumbs.showin()}r.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(G);r.play.click(function(){a.slideshowFullScreen&&
h.fullScreen(true);ba();return false});r.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(G);r.pause.click(function(){X();return false});if(a.slideshowAuto){r.play.hide();r.pause.showin()}else{r.pause.hide();r.play.showin()}r.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(G);r.next.click(function(){ma();W();return false});var qa=0;G.children().each(function(){b(this).css("display")!=="none"&&(qa=qa+b(this).outerWidth())});G.width(qa);G.children("a").addHint();p=G;a.thumbsOn||
i.css("top",-x.outerHeight()-10);x.mouseenter(function(){K();B=true}).mouseleave(function(){B=false});p.mouseenter(function(){H=true;b(this).stop(true,false).fadeTo(200,1)}).mouseleave(function(){H=false;b(this).stop(true,false).fadeTo(200,a.controlbarOpacity)});var Fa=0,Ga=0;b.support.touch||h.mousemove(function(a){if(!B&&(Fa-a.clientY||Ga-a.clientX)){Ca();Ga=a.clientX;Fa=a.clientY}});if(a.mapAll){var ja,ka,ra;f.each(function(a){ja=b(this).find("img:first");if(ja.length&&(ka=ja.data("map"))&&(ka=
va(ka))){ra=n(ja);aa.push({map:ka,label:a+1+(ra?": "+ra.stripHTML():""),link:b(this)})}})}!b.support.touch&&(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(window).keydown(la);a.hash&&a.hash!=="no"&&b.history.init(function(c){var d,g;if(g=c)if(g=c.length){if(a.hash==="number")c=(parseInt(c)||1)-1;else a:{var h;for(g=0;g<f.length;g++)if((h=f.eq(g).attr("href"))&&h.substring(h.lastIndexOf("/")+1)===c){c=g;break a}c=-1}g=(d=c)>=0&&d<f.length}if(g){N(d);a.slideshowAuto=false}else{U();b.browser.msie&&
setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10)}});V(true);if(a.slideshowAuto){a.slideshowFullScreen&&h.fullScreen(true);N(A);ba()}else a.skipIndex&&N(A);b(window).resize(function(){clearTimeout(Q);Q=setTimeout(function(){var c=b(window).width(),d=b(window).height();if(c!==M||d!==T){z&&z.centerThis({fit:a.fitImage,marginTop:ea()});M=c;T=d}},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,
skipIndex:false,showStart:true,speed:600,controlbarOpacity:0.7,transitions:true,preScale:0.95,slideshowDelay:3E3,slideshowLoop:false,slideshowAuto:false,slideshowFullScreen:false,markNewDays:30,afterLast:"ask",infoOn:true,showImageNumbers:true,thumbsOn:false,fitImage:true,fitShrinkonly:true,fitFreespace:true,fitPadding:15,borderWidth:10,rightClickProtect:false,metaOn:false,mapOn:false,shopOn:false,fotomotoOn:false,shareOn:false,printOn:false,enableKeyboard:true,enableMouseWheel:true,numberLinks:false,
videoAuto:true,videoFit:true,videoWidth:640,videoHeight:480,scrollDuration:1E3};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",
showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",
shareBtn:"Share",shareLabel:"Share this photo over social sites",locationWarning:"Works only when uploaded"};b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",fotomoto:"fotomoto",share:"share",print:"print",
comment:"comment",link:"link",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",regions:"regions",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",showHint:"showhint"}})(jQuery);